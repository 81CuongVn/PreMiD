<html>

<head>
  <title>YT Presence &bull; Update avaiable!</title>
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/update.css">
  <script>if (typeof module === 'object') { window.module = module; module = undefined; }</script>

  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/showdown.min.js"></script>

  <script>if (window.module) module = window.module;</script>
  <script>
    var converter = new showdown.Converter()

    const ipc = require('electron').ipcRenderer;
    const remote = require('electron').remote

  </script>
</head>

<body>
  <div id="header">
    <img draggable="false" src="../assets/images/logo.png">
    <h1>YT Presence</h1>
  </div>
  <div id="content">
    <p id="description"></p>
  </div>
  <div id="footer">
    <button id="update">Update</button>
    <button id="later">Later</button>
  </div>
  <script>
    var shell = require('electron').shell;
    ipc.on('updateData', (event, message) => {
      $('#description').html(converter.makeHtml(message.body))
      $('#update').click(() => {
        console.log(message)
        shell.openExternal(`https://github.com/Timeraa/YT-Presence/releases/tag/${message.tag_name}`);
        remote.getCurrentWindow().close()
      })
    })


    $('#later').click(e => {
      remote.getCurrentWindow().close()
    })
  </script>
</body>

</html>